# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
## AIOps Dashboard - –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å–∏—Å—Ç–µ–º—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤.

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2026-01-19  
**–í–µ—Ä—Å–∏—è:** 3.0

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
4. [–î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö](#–¥–∏–∞–≥—Ä–∞–º–º—ã-–ø–æ—Ç–æ–∫–æ–≤-–¥–∞–Ω–Ω—ã—Ö)
5. [–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ö–µ–º–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
6. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è)
7. [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
8. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
9. [–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-–æ—à–∏–±–æ–∫)
10. [–ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è](#–º–æ–¥—É–ª—å-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è)

---

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

AIOps Dashboard - –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **Backend API**: REST API –Ω–∞ –±–∞–∑–µ FastAPI —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **Frontend UI**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ –Ω–∞ Streamlit —Å –ø—Ä—è–º—ã–º –¥–æ—Å—Ç—É–ø–æ–º –∫ –ë–î
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –º–µ—Ç—Ä–∏–∫
- **Forecasting Engine**: –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –±–∞–∑–µ Prophet
- **Testing Suite**: –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–∞ pytest
- **ETL Pipeline**: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **Reverse Proxy**: Apache HTTPd –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –∏ SSL

---

## –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```mermaid
graph TB
    subgraph "–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–ª–æ–π"
        Browser[–í–µ–±-–±—Ä–∞—É–∑–µ—Ä]
    end
    
    subgraph "Reverse Proxy"
        HTTPd[Apache HTTPd<br/>–ü–æ—Ä—Ç 80/443]
    end
    
    subgraph "–°–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
        API[FastAPI Backend<br/>–ü–æ—Ä—Ç 8000<br/>REST API]
        UI[Streamlit UI<br/>–ü–æ—Ä—Ç 8501<br/>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥]
    end
    
    subgraph "–°–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤"
        Auth[Keycloak<br/>–ü–æ—Ä—Ç 8087<br/>–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ]
        Forecast[Prophet Forecaster<br/>ML –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ]
    end
    
    subgraph "–°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö"
        DB[(PostgreSQL<br/>–ü–æ—Ä—Ç 5432<br/>–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã)]
        Models[–•—Ä–∞–Ω–∏–ª–∏—â–µ –º–æ–¥–µ–ª–µ–π<br/>–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞]
    end
    
    subgraph "ETL Pipeline"
        ETL[–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö<br/>prepare_data.py<br/>data_loader.py]
    end
    
    Browser -->|HTTPS/HTTP| HTTPd
    HTTPd -->|/api/*| API
    HTTPd -->|/dashboard-ui/*| UI
    HTTPd -.->|/keycloak/*| Auth
    
    API -->|–ß—Ç–µ–Ω–∏–µ/–ó–∞–ø–∏—Å—å| DB
    UI -->|–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø| DB
    UI -->|API –≤—ã–∑–æ–≤—ã| API
    
    API -->|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç| Forecast
    Forecast -->|–ó–∞–≥—Ä—É–∑–∫–∞/–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ| Models
    Forecast -->|–ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö| DB
    
    ETL -->|–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫| DB
    
    style Browser fill:#e1f5ff
    style HTTPd fill:#fff4e1
    style API fill:#e8f5e9
    style UI fill:#ffe6cc
    style DB fill:#f3e5f5
    style Forecast fill:#fff9c4
    style ETL fill:#e0f2f1
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### Backend API (FastAPI)

```mermaid
graph LR
    subgraph "API —Å–ª–æ–π"
        Main[main.py<br/>FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ]
        Endpoints[endpoints.py<br/>REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã<br/>–í–∞–ª–∏–¥–∞—Ü–∏—è]
    end
    
    subgraph "–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞"
        DBCRUD[dbcrud.py<br/>–ë–∞–∑–æ–≤—ã–π CRUD]
        FactsCRUD[facts_crud.py<br/>–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏]
        PredsCRUD[preds_crud.py<br/>–ü—Ä–æ–≥–Ω–æ–∑—ã]
        Anomaly[anomaly_detector.py<br/>–î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª–∏–π]
    end
    
    subgraph "–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö"
        Models[models.py<br/>SQLAlchemy ORM<br/>ServerMetricsFact<br/>ServerMetricsPredictions]
        Schemas[schemas.py<br/>Pydantic —Å—Ö–µ–º—ã<br/>–í–∞–ª–∏–¥–∞—Ü–∏—è]
    end
    
    subgraph "–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞"
        Conn[connection.py<br/>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î<br/>SessionLocal]
        Logger[base_logger.py<br/>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ]
    end
    
    Main --> Endpoints
    Endpoints --> FactsCRUD
    Endpoints --> PredsCRUD
    Endpoints --> DBCRUD
    Endpoints --> Anomaly
    
    FactsCRUD --> Models
    PredsCRUD --> Models
    DBCRUD --> Models
    
    Models --> Conn
    FactsCRUD --> Conn
    
    Endpoints --> Schemas
    Main --> Logger
    
    style Main fill:#4caf50
    style Endpoints fill:#81c784
    style Models fill:#2196f3
    style Conn fill:#9e9e9e
```

### Frontend UI (Streamlit)

```mermaid
graph TB
    subgraph "UI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞"
        MainUI[main.py<br/>Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ<br/>–¢–∞–±—ã]
    end
    
    subgraph "–°—Ç—Ä–∞–Ω–∏—Ü—ã"
        Fact[fact.py<br/>–§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏<br/>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è]
        Forecast[forecast.py<br/>–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ<br/>Prophet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è]
        Analysis[analysis.py<br/>–ê–Ω–∞–ª–∏–∑ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º]
        ASAnalysis[as_analysis.py<br/>–ê–Ω–∞–ª–∏–∑ –ø–æ –ê–°]
    end
    
    subgraph "–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã"
        Header[header.py<br/>–ó–∞–≥–æ–ª–æ–≤–æ–∫]
        Sidebar[sidebar.py<br/>–ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å]
        Footer[footer.py<br/>–ü–æ–¥–≤–∞–ª]
        HeatmapCPU[heatmap_as_cpu.py<br/>–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ CPU]
        HeatmapMem[heatmap_as_mem.py<br/>–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ RAM]
    end
    
    subgraph "–£—Ç–∏–ª–∏—Ç—ã"
        DataLoader[data_loader.py<br/>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î<br/>–û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫]
        DataGen[data_generator.py<br/>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö<br/>Fallback]
        AlertRules[alert_rules.py<br/>–ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤]
        AlertAnalyzer[alert_analyzer.py<br/>–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–ª–µ—Ä—Ç–æ–≤]
    end
    
    MainUI --> Fact
    MainUI --> Forecast
    MainUI --> Analysis
    MainUI --> ASAnalysis
    
    MainUI --> Header
    MainUI --> Sidebar
    MainUI --> Footer
    
    Fact --> DataLoader
    Forecast --> DataLoader
    Analysis --> DataLoader
    ASAnalysis --> HeatmapCPU
    ASAnalysis --> HeatmapMem
    
    Fact --> AlertRules
    Analysis --> AlertAnalyzer
    
    DataLoader -->|–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç| DB[(PostgreSQL)]
    DataLoader -.->|Fallback| DataGen
    
    style MainUI fill:#ff6b6b
    style Forecast fill:#ffa8a8
    style DataLoader fill:#51cf66
    style DataGen fill:#ffd43b
```

### –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è (Prophet)

```mermaid
graph TB
    subgraph "Forecaster –º–æ–¥—É–ª—å"
        Forecaster[forecaster.py<br/>ProphetForecaster<br/>–ì–ª–∞–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å]
        
        Training[model_training.py<br/>–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π<br/>–í–∞–ª–∏–¥–∞—Ü–∏—è]
        Tuning[model_tuning.py<br/>–ü–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤<br/>Cross-validation]
        Prediction[model_prediction.py<br/>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤]
        
        Storage[storage.py<br/>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞<br/>–º–æ–¥–µ–ª–µ–π]
        Utils[utils.py<br/>–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö<br/>–ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞]
        Config[config.py<br/>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è<br/>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã]
        
        DBUtils[db_utils.py<br/>–†–∞–±–æ—Ç–∞ —Å –ë–î<br/>CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏]
        Evaluation[evaluation.py<br/>–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞<br/>MAPE, MAE, RMSE]
    end
    
    Forecaster --> Training
    Forecaster --> Tuning
    Forecaster --> Prediction
    Forecaster --> Storage
    
    Training --> Utils
    Tuning --> Utils
    Prediction --> Utils
    
    Forecaster --> Config
    Forecaster --> DBUtils
    
    Training --> Evaluation
    Tuning --> Evaluation
    
    DBUtils --> DB[(PostgreSQL)]
    Storage --> FileSystem[–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞]
    
    style Forecaster fill:#ff9800
    style Training fill:#ffb74d
    style Tuning fill:#ffb74d
    style Prediction fill:#ffb74d
    style Storage fill:#9e9e9e
```

---

## –î–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Ç–æ–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫ (Fact Metrics)

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant UI as Streamlit UI
    participant Loader as data_loader.py
    participant CRUD as FactsCRUD
    participant DB as PostgreSQL
    
    User->>UI: –í—ã–±–∏—Ä–∞–µ—Ç VM –∏ –º–µ—Ç—Ä–∏–∫—É
    UI->>Loader: load_data_from_database()
    
    alt –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
        Loader->>CRUD: get_metrics_fact(vm, metric, dates)
        CRUD->>DB: SELECT –∑–∞–ø—Ä–æ—Å
        DB-->>CRUD: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
        CRUD-->>Loader: List[ServerMetricsFact]
        Loader->>Loader: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ DataFrame
        Loader-->>UI: DataFrame
    else –ë–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
        Loader->>Loader: generate_server_data()
        Loader-->>UI: Mock DataFrame
    end
    
    UI->>UI: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (Plotly)
    UI-->>User: –ì—Ä–∞—Ñ–∏–∫–∏ –º–µ—Ç—Ä–∏–∫
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant UI as Forecast Page
    participant Forecaster as ProphetForecaster
    participant Training as model_training
    participant Tuning as model_tuning
    participant Storage as storage
    participant DB as PostgreSQL
    
    User->>UI: –í—ã–±–∏—Ä–∞–µ—Ç –ê–°, –º–µ—Ç—Ä–∏–∫—É, –ø–µ—Ä–∏–æ–¥
    UI->>UI: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –º–∞–ø–ø–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ –ê–°
    UI->>DB: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    DB-->>UI: DataFrame –º–µ—Ç—Ä–∏–∫
    
    loop –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ê–°
        UI->>UI: prepare_data_for_prophet()
        UI->>Forecaster: generate_forecast_for_server()
        
        Forecaster->>Tuning: tune_hyperparameters()
        Tuning->>Tuning: Cross-validation / Holdout
        Tuning-->>Forecaster: best_params
        
        Forecaster->>Training: train_model(data, params)
        Training->>Training: Prophet.fit()
        Training-->>Forecaster: trained_model, metrics
        
        Forecaster->>Forecaster: predict(periods, freq)
        Forecaster->>Storage: save_model()
        
        Forecaster-->>UI: forecast_df, quality_metrics
        UI->>UI: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (Plotly)
    end
    
    UI->>UI: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –ø–æ –ê–°
    UI->>UI: –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤
    UI-->>User: –ì—Ä–∞—Ñ–∏–∫–∏ + –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```

### ETL Pipeline

```mermaid
sequenceDiagram
    participant Source as –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö<br/>(Excel/CSV)
    participant Prep as prepare_data.py
    participant Loader as data_loader.py
    participant API as FastAPI
    participant CRUD as FactsCRUD
    participant DB as PostgreSQL
    
    Source->>Prep: –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞
    Prep->>Prep: –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è
    Prep->>Prep: –û–±—Ä–∞–±–æ—Ç–∫–∞ timestamp
    Prep-->>Loader: DataFrame
    
    Loader->>API: POST /api/v1/facts/batch
    API->>API: –í–∞–ª–∏–¥–∞—Ü–∏—è (Pydantic)
    
    API->>CRUD: create_metrics_fact_batch()
    
    loop –î–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
        CRUD->>DB: INSERT INTO server_metrics_fact
        alt –î—É–±–ª–∏–∫–∞—Ç
            DB-->>CRUD: IntegrityError
            CRUD->>CRUD: –ü—Ä–æ–ø—É—Å–∫ (skip)
        else –£—Å–ø–µ—Ö
            DB-->>CRUD: Success
        end
    end
    
    CRUD-->>API: created_count
    API-->>Loader: BatchCreateResponse
    Loader-->>Source: –°—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### ER-–¥–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
erDiagram
    ServerMetricsFact ||--o{ ServerMetricsPredictions : "—Å–≤—è–∑–∞–Ω—ã –ø–æ vm+metric"
    
    ServerMetricsFact {
        uuid id PK "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä"
        string vm "–ò–º—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"
        datetime timestamp "–í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (UTC)"
        string metric "–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏"
        decimal value "–ó–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (0-100)"
        datetime created_at "–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏"
    }
    
    ServerMetricsPredictions {
        uuid id PK "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä"
        string vm "–ò–º—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã"
        datetime timestamp "–í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞"
        string metric "–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏"
        decimal value_predicted "–ü—Ä–æ–≥–Ω–æ–∑–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ"
        decimal lower_bound "–ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ (80% CI)"
        decimal upper_bound "–í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ (80% CI)"
        datetime created_at "–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞"
    }
```

### –¢–∞–±–ª–∏—Ü—ã –∏ –∏–Ω–¥–µ–∫—Å—ã

#### server_metrics_fact

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ (CPU, RAM, Disk, Network)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- `id` (UUID) - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `vm` (VARCHAR 255) - –∏–º—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- `timestamp` (TIMESTAMP WITH TIMEZONE) - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- `metric` (VARCHAR 255) - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ (cpu.usage.average, mem.usage.average)
- `value` (DECIMAL 20,5) - –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- `created_at` (TIMESTAMP WITH TIMEZONE) - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- `UNIQUE (vm, timestamp, metric)` - —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è
- `CHECK (timestamp <= CURRENT_TIMESTAMP)` - –º–µ—Ç–∫–∞ –Ω–µ –∏–∑ –±—É–¥—É—â–µ–≥–æ
- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å: `idx_vm_timestamp_metric (vm, timestamp, metric)`

#### server_metrics_predictions

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –º–µ—Ç—Ä–∏–∫

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:
- `id` (UUID) - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `vm` (VARCHAR 255) - –∏–º—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- `timestamp` (TIMESTAMP WITH TIMEZONE) - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–∞, –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–æ
- `metric` (VARCHAR 255) - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- `value_predicted` (DECIMAL 20,5) - –ø—Ä–æ–≥–Ω–æ–∑–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
- `lower_bound` (DECIMAL 20,5) - –Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- `upper_bound` (DECIMAL 20,5) - –≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- `created_at` (TIMESTAMP WITH TIMEZONE) - –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- `UNIQUE (vm, timestamp, metric)` - —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–∞
- –°–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å: `idx_vm_timestamp_metric_pred (vm, timestamp, metric)`

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```mermaid
graph TB
    subgraph "Docker Network: servers-network"
        subgraph "–í–µ–±-—Å–ª–æ–π"
            HTTPd[Apache HTTPd<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: httpd-proxy<br/>–ü–æ—Ä—Ç—ã: 80, 443<br/>SSL —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏—è]
        end
        
        subgraph "–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π"
            API[FastAPI App<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: dashboard<br/>–ü–æ—Ä—Ç: 8000<br/>uvicorn]
            UI[Streamlit UI<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: dashboard-ui<br/>–ü–æ—Ä—Ç: 8501<br/>streamlit]
        end
        
        subgraph "–°–µ—Ä–≤–∏—Å—ã"
            Keycloak[Keycloak<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: keycloak<br/>–ü–æ—Ä—Ç: 8087<br/>–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ]
        end
        
        subgraph "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"
            Postgres[PostgreSQL 16.9<br/>–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä: postgres<br/>–ü–æ—Ä—Ç: 5432]
        end
    end
    
    subgraph "–•–æ—Å—Ç —Ç–æ–º—ã"
        ModelStorage[–•—Ä–∞–Ω–∏–ª–∏—â–µ –º–æ–¥–µ–ª–µ–π<br/>./notebooks/models]
        PostgresData[–î–∞–Ω–Ω—ã–µ PostgreSQL<br/>~/docker-share/postgres-data-server]
        SSL[SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã<br/>./docker/httpd/data/letsencrypt]
    end
    
    HTTPd -->|/api/*| API
    HTTPd -->|/dashboard-ui/*| UI
    HTTPd -.->|/keycloak/*| Keycloak
    
    API -->|–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ| Postgres
    UI -->|–ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ| Postgres
    UI -->|API –≤—ã–∑–æ–≤—ã| API
    
    API -->|–ß—Ç–µ–Ω–∏–µ/–ó–∞–ø–∏—Å—å| ModelStorage
    Postgres -->|Persist| PostgresData
    HTTPd -->|SSL Certs| SSL
    
    style HTTPd fill:#ff9800
    style API fill:#4caf50
    style UI fill:#2196f3
    style Postgres fill:#9c27b0
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Backend API (.env)
```env
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=secure_password
DB_NAME=server_metrics

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
LOG_LEVEL=INFO
CORS_ORIGINS=*
```

#### Frontend UI (.env)
```env
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (–ø—Ä—è–º–æ–µ)
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=secure_password
DB_NAME=server_metrics

# API Backend (–¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π)
API_URL=http://dashboard:8000

# Keycloak (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
KEYCLOAK_URL=http://keycloak:8087/keycloak
KEYCLOAK_REALM=srv
KEYCLOAK_CLIENT_ID=srv-keycloak-client
KEYCLOAK_CLIENT_SECRET=change-me
```

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|--------|------------|
| Framework | FastAPI | 0.104.1 | REST API, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| ORM | SQLAlchemy | 2.0.23 | –†–∞–±–æ—Ç–∞ —Å PostgreSQL |
| –í–∞–ª–∏–¥–∞—Ü–∏—è | Pydantic | 2.5.0 | –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| ASGI Server | Uvicorn | 0.24.0 | –ó–∞–ø—É—Å–∫ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | PostgreSQL | 16.9 | –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ |

### Frontend

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|--------|------------|
| Framework | Streamlit | 1.29.0 | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–∞—à–±–æ—Ä–¥ |
| –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è | Plotly | 5.18.0 | –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã |
| –î–∞–Ω–Ω—ã–µ | Pandas | 2.1.4 | –û–±—Ä–∞–±–æ—Ç–∫–∞ DataFrame |
| –í—ã—á–∏—Å–ª–µ–Ω–∏—è | NumPy | 1.26.2 | –ß–∏—Å–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ |

### Machine Learning

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|--------|------------|
| –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ | Prophet | 1.1.5 | –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã, —Ç—Ä–µ–Ω–¥—ã, —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å |
| –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è | scikit-learn | - | –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (MAPE, MAE, RMSE) |

### Testing

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|--------|------------|
| Test Framework | Pytest | 7.4.3 | Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |
| Coverage | pytest-cov | - | –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ —Ç–µ—Å—Ç–∞–º–∏ |
| HTTP Client | httpx | - | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API |
| Test DB | SQLite | - | In-memory –±–∞–∑–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ |

### Infrastructure

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|------------|
| Containerization | Docker + Docker Compose | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ |
| Reverse Proxy | Apache HTTPd 2.4 | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, SSL |
| Auth (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | Keycloak 26.4.6 | SSO, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ conftest.py              # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îú‚îÄ‚îÄ test_dbcrud.py          # Unit-—Ç–µ—Å—Ç—ã DBCRUD
‚îú‚îÄ‚îÄ test_factscrud.py       # Unit-—Ç–µ—Å—Ç—ã FactsCRUD
‚îú‚îÄ‚îÄ test_predscrud.py       # Unit-—Ç–µ—Å—Ç—ã PredsCRUD
‚îú‚îÄ‚îÄ test_api_endpoints.py   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API
‚îú‚îÄ‚îÄ test_anomaly_detector.py
‚îú‚îÄ‚îÄ test_prophet_forecaster_prepare.py
‚îú‚îÄ‚îÄ test_ui_alert_analyzer.py
‚îú‚îÄ‚îÄ test_ui_alert_rules.py
‚îú‚îÄ‚îÄ test_ui_data_loader.py
‚îú‚îÄ‚îÄ test_utils_prepare_data.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏

```mermaid
graph TB
    subgraph "Unit Tests"
        TestCRUD[test_dbcrud.py<br/>–¢–µ—Å—Ç—ã CRUD –æ–ø–µ—Ä–∞—Ü–∏–π]
        TestFacts[test_factscrud.py<br/>–¢–µ—Å—Ç—ã —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫]
        TestPreds[test_predscrud.py<br/>–¢–µ—Å—Ç—ã –ø—Ä–æ–≥–Ω–æ–∑–æ–≤]
        TestAnomaly[test_anomaly_detector.py<br/>–¢–µ—Å—Ç—ã –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –∞–Ω–æ–º–∞–ª–∏–π]
    end
    
    subgraph "Integration Tests"
        TestAPI[test_api_endpoints.py<br/>–¢–µ—Å—Ç—ã REST API<br/>–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã]
    end
    
    subgraph "UI Tests"
        TestAlerts[test_ui_alert_*.py<br/>–¢–µ—Å—Ç—ã –∞–ª–µ—Ä—Ç–æ–≤]
        TestLoader[test_ui_data_loader.py<br/>–¢–µ—Å—Ç—ã –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö]
    end
    
    subgraph "Test Infrastructure"
        Conftest[conftest.py<br/>–§–∏–∫—Å—Ç—É—Ä—ã<br/>TestDB SessionLocal]
        TestDB[(SQLite In-Memory<br/>–¢–µ—Å—Ç–æ–≤–∞—è –ë–î)]
    end
    
    TestCRUD --> Conftest
    TestFacts --> Conftest
    TestPreds --> Conftest
    TestAPI --> Conftest
    
    Conftest --> TestDB
    
    style TestAPI fill:#ef9a9a
    style Conftest fill:#e1bee7
    style TestDB fill:#ce93d8
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
pytest --cov=src/app --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/test_api_endpoints.py

# Verbose —Ä–µ–∂–∏–º
pytest -v

# Windows
run_tests.bat
```

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –£—Ä–æ–≤–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

```mermaid
graph TB
    subgraph "API —Å–ª–æ–π"
        Endpoint[API Endpoint]
        Validator[Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è]
    end
    
    subgraph "Helper —Å–ª–æ–π"
        DateVal[validate_date_range<br/>–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç]
        ErrorHandler[handle_database_error<br/>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ë–î]
        SchemaConv[db_metric_to_schema<br/>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Å—Ö–µ–º]
    end
    
    subgraph "–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞"
        CRUD[CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏]
    end
    
    subgraph "–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö"
        DB[(PostgreSQL)]
    end
    
    subgraph "–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ"
        Logger[base_logger.py<br/>–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏]
    end
    
    Endpoint --> Validator
    Validator -->|Valid| DateVal
    DateVal -->|Valid| CRUD
    CRUD --> DB
    
    CRUD -->|SQLAlchemyError| ErrorHandler
    DB -->|IntegrityError| ErrorHandler
    ErrorHandler --> Logger
    ErrorHandler -->|HTTPException| Endpoint
    
    CRUD -->|Success| SchemaConv
    SchemaConv --> Endpoint
    
    style Endpoint fill:#4caf50
    style Validator fill:#81c784
    style ErrorHandler fill:#ff9800
    style Logger fill:#9e9e9e
```

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫

| HTTP Code | –¢–∏–ø –æ—à–∏–±–∫–∏ | –ü—Ä–∏—á–∏–Ω–∞ | –û–±—Ä–∞–±–æ—Ç–∫–∞ |
|-----------|-----------|---------|-----------|
| 400 | Bad Request | –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è | Pydantic –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| 404 | Not Found | VM/–º–µ—Ç—Ä–∏–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ | CRUD —Å–ª–æ–π |
| 409 | Conflict | –î—É–±–ª–∏–∫–∞—Ç—ã, –Ω–∞—Ä—É—à–µ–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ | IntegrityError –æ–±—Ä–∞–±–æ—Ç–∫–∞ |
| 500 | Internal Server Error | –û—à–∏–±–∫–∏ –ë–î, –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è | handle_database_error() |

### –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ –ª–∏–º–∏—Ç—ã

```python
# –ò–∑ endpoints.py
DEFAULT_LIMIT = 5000          # –õ–∏–º–∏—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
MAX_LIMIT = 10000             # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç
DEFAULT_HOURS = 24            # –ß–∞—Å—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
MAX_HOURS = 720               # –ú–∞–∫—Å —á–∞—Å—ã (30 –¥–Ω–µ–π)
DEFAULT_DAYS_TO_KEEP = 90     # –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
MAX_DAYS_TO_KEEP = 365        # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
MIN_INTERVAL_MINUTES = 1      # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
MAX_INTERVAL_MINUTES = 1440   # –ú–∞–∫—Å –∏–Ω—Ç–µ—Ä–≤–∞–ª (24 —á–∞—Å–∞)
DEFAULT_INTERVAL_MINUTES = 30 # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
```

---

## –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ProphetForecaster

#### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** —Å –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
2. **–ü–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** (Grid Search —Å –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏–µ–π)
3. **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏**: —á–∞—Å, –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏, –º–µ—Å—è—Ü, –∫–≤–∞—Ä—Ç–∞–ª, –≤—ã—Ö–æ–¥–Ω—ã–µ –∏ —Ç.–¥.
4. **–û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞**: MAPE, MAE, RMSE
5. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞** –æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π
6. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤** —Å –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏

#### –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø–æ–¥–±–æ—Ä–∞

```python
# –ò–∑ forecast.py
param_grid = {
    'seasonality_mode': ['additive', 'multiplicative'],
    'changepoint_prior_scale': [0.01, 0.05, 0.1, 0.2],
    'seasonality_prior_scale': [3.0, 5.0, 10.0, 15.0],
    'holidays_prior_scale': [5.0, 10.0],
    'changepoint_range': [0.8, 0.9, 0.95],
    'n_changepoints': [15, 25, 35],
    'daily_seasonality': True,
    'weekly_seasonality': True
}
```

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–†–µ–≥—Ä–µ—Å—Å–æ—Ä—ã)

- `hour` - —á–∞—Å –¥–Ω—è (0-23)
- `day_of_week` - –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0-6)
- `day_of_month` - –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ (1-31)
- `week_of_year` - –Ω–µ–¥–µ–ª—è –≥–æ–¥–∞ (1-52)
- `month` - –º–µ—Å—è—Ü (1-12)
- `quarter` - –∫–≤–∞—Ä—Ç–∞–ª (1-4)
- `is_weekend` - –≤—ã—Ö–æ–¥–Ω–æ–π –¥–µ–Ω—å (0/1)
- `is_month_start` - –Ω–∞—á–∞–ª–æ –º–µ—Å—è—Ü–∞ (0/1)
- `is_month_end` - –∫–æ–Ω–µ—Ü –º–µ—Å—è—Ü–∞ (0/1)
- `is_quarter_start` - –Ω–∞—á–∞–ª–æ –∫–≤–∞—Ä—Ç–∞–ª–∞ (0/1)
- `is_quarter_end` - –∫–æ–Ω–µ—Ü –∫–≤–∞—Ä—Ç–∞–ª–∞ (0/1)
- `is_year_start` - –Ω–∞—á–∞–ª–æ –≥–æ–¥–∞ (0/1)
- `is_year_end` - –∫–æ–Ω–µ—Ü –≥–æ–¥–∞ (0/1)

#### –ü—Ä–æ—Ü–µ—Å—Å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è

```mermaid
sequenceDiagram
    participant UI as Forecast UI
    participant Forecaster as generate_forecast_for_server
    participant Tuning as Hyperparameter Tuning
    participant Prophet as Prophet Model
    participant Evaluation as Evaluation
    
    UI->>Forecaster: prophet_df, forecast_days
    Forecaster->>Forecaster: add_time_features()
    
    alt –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è CV
        Forecaster->>Tuning: evaluate_with_cv(param_grid)
        Tuning->>Tuning: Cross-validation (n_splits)
        loop –î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
            Tuning->>Prophet: train(params)
            Prophet-->>Tuning: model
            Tuning->>Evaluation: calculate_mape()
            Evaluation-->>Tuning: score
        end
        Tuning-->>Forecaster: best_params, best_score
    else –ú–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö
        Forecaster->>Tuning: evaluate_with_holdout()
        Tuning->>Prophet: train(params)
        Prophet-->>Tuning: model
        Tuning->>Evaluation: calculate_mape(val_data)
        Evaluation-->>Tuning: score
        Tuning-->>Forecaster: best_params, best_score
    end
    
    Forecaster->>Prophet: train(all_data, best_params)
    Prophet-->>Forecaster: final_model
    
    Forecaster->>Prophet: make_future_dataframe(periods)
    Prophet->>Forecaster: future_df
    Forecaster->>Prophet: predict(future_df + features)
    Prophet-->>Forecaster: forecast
    
    Forecaster->>Evaluation: quality_metrics(history)
    Evaluation-->>Forecaster: MAPE, MAE, RMSE
    
    Forecaster-->>UI: forecast, metrics
```

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

#### MAPE (Mean Absolute Percentage Error)

```python
MAPE = mean(|actual - predicted| / actual) √ó 100%
```

**–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è**:
- MAPE < 10% - –æ—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–∑–µ–ª–µ–Ω—ã–π)
- MAPE 10-20% - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–∂–µ–ª—Ç—ã–π)
- MAPE 20-30% - —Å—Ä–µ–¥–Ω–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- MAPE > 30% - –Ω–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ (–∫—Ä–∞—Å–Ω—ã–π)

#### MAE (Mean Absolute Error)

```python
MAE = mean(|actual - predicted|)
```

#### RMSE (Root Mean Squared Error)

```python
RMSE = sqrt(mean((actual - predicted)¬≤))
```

### –ê–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —É—Ä–æ–≤–Ω—è —Ä–∏—Å–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≥–Ω–æ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏:

| –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ | –î–∏–∞–ø–∞–∑–æ–Ω –Ω–∞–≥—Ä—É–∑–∫–∏ | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ |
|--------------|-------------------|--------------|
| üü© –ù–∏–∑–∫–∏–π | < 50% | –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, –ø–ª–∞–Ω–æ–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ |
| üü® –°—Ä–µ–¥–Ω–∏–π | 50-70% | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é |
| üüß –í—ã—Å–æ–∫–∏–π | 70-85% | –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ |
| üü• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π | > 85% | –°—Ä–æ—á–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ |

---

## API Endpoints

### –û—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã

```mermaid
graph LR
    API[FastAPI App<br/>/api/v1] --> DB_Ops[Database Ops<br/>/vms, /stats, /cleanup]
    API --> Facts[Fact Metrics<br/>/facts, /facts/batch]
    API --> Preds[Predictions<br/>/predictions, /predictions/batch]
    API --> Legacy[Legacy<br/>/metrics, /latest_metrics]
    
    style API fill:#4caf50
    style DB_Ops fill:#81c784
    style Facts fill:#81c784
    style Preds fill:#81c784
    style Legacy fill:#ff9800
```

### –ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-------|------|-----------|
| GET | `/api/v1/vms` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö VM |
| GET | `/api/v1/vms/{vm}/metrics` | –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π VM |
| GET | `/api/v1/facts` | –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ |
| POST | `/api/v1/facts/batch` | –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç—Ä–∏–∫ |
| GET | `/api/v1/facts/latest` | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –º–µ—Ç—Ä–∏–∫–∏ |
| GET | `/api/v1/predictions` | –ü—Ä–æ–≥–Ω–æ–∑—ã —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ |
| POST | `/api/v1/predictions/batch` | –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ |
| GET | `/api/v1/predictions/future` | –ë—É–¥—É—â–∏–µ –ø—Ä–æ–≥–Ω–æ–∑—ã |
| GET | `/api/v1/predictions/compare` | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ñ–∞–∫—Ç vs –ø—Ä–æ–≥–Ω–æ–∑ |
| GET | `/api/v1/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î |
| DELETE | `/api/v1/cleanup` | –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö |

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `http://localhost:8000/docs` (Swagger UI)

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

```
servers-dashboard/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                          # FastAPI Backend
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ endpoints.py              # REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py                 # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py                # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ connection.py             # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dbcrud.py                 # –ë–∞–∑–æ–≤—ã–π CRUD
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ facts_crud.py             # CRUD —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ preds_crud.py             # CRUD –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ anomaly_detector.py       # –î–µ—Ç–µ–∫—Ç–æ—Ä –∞–Ω–æ–º–∞–ª–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base_logger.py            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ ui/                           # Streamlit Frontend
‚îÇ       ‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Streamlit
‚îÇ       ‚îú‚îÄ‚îÄ pages/                    # –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–∞—à–±–æ—Ä–¥–∞
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ fact.py               # –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ forecast.py           # –ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ analysis.py           # –ê–Ω–∞–ª–∏–∑ –ø–æ —Å–µ—Ä–≤–µ—Ä–∞–º
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ as_analysis.py        # –ê–Ω–∞–ª–∏–∑ –ø–æ –ê–°
‚îÇ       ‚îú‚îÄ‚îÄ components/               # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ header.py
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ sidebar.py
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ footer.py
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ heatmap_as_cpu.py
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ heatmap_as_mem.py
‚îÇ       ‚îú‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª–∏—Ç—ã UI
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py        # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ data_generator.py     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –º–æ–∫–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ alert_rules.py        # –ü—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ alert_analyzer.py     # –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∞–ª–µ—Ä—Ç–æ–≤
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ base_logger.py
‚îÇ       ‚îú‚îÄ‚îÄ assets/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ style.css             # –°—Ç–∏–ª–∏
‚îÇ       ‚îî‚îÄ‚îÄ requirements.txt
‚îÇ
‚îú‚îÄ‚îÄ notebooks/
‚îÇ   ‚îî‚îÄ‚îÄ forecast/                     # –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ forecaster.py             # –ì–ª–∞–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ       ‚îú‚îÄ‚îÄ model_training.py         # –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ model_tuning.py           # –ü–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ model_prediction.py       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ storage.py                # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞
‚îÇ       ‚îú‚îÄ‚îÄ evaluation.py             # –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
‚îÇ       ‚îú‚îÄ‚îÄ utils.py                  # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ       ‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ db_utils.py               # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ
‚îú‚îÄ‚îÄ ETL/                              # ETL Pipeline
‚îÇ   ‚îú‚îÄ‚îÄ prepare_data.py               # –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ data_loader.py                # –ó–∞–≥—Ä—É–∑—á–∏–∫ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ new_data.py
‚îÇ
‚îú‚îÄ‚îÄ tests/                            # –¢–µ—Å—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py                   # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îÇ   ‚îú‚îÄ‚îÄ test_dbcrud.py
‚îÇ   ‚îú‚îÄ‚îÄ test_factscrud.py
‚îÇ   ‚îú‚îÄ‚îÄ test_predscrud.py
‚îÇ   ‚îú‚îÄ‚îÄ test_api_endpoints.py
‚îÇ   ‚îú‚îÄ‚îÄ test_anomaly_detector.py
‚îÇ   ‚îú‚îÄ‚îÄ test_prophet_forecaster_prepare.py
‚îÇ   ‚îî‚îÄ‚îÄ test_ui_*.py
‚îÇ
‚îú‚îÄ‚îÄ docker/                           # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ all/
‚îÇ       ‚îî‚îÄ‚îÄ docker-compose.yml        # –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫
‚îÇ
‚îú‚îÄ‚îÄ data/                             # –î–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ source/                       # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ all_vm.xlsx               # –ú–∞–ø–ø–∏–Ω–≥ —Å–µ—Ä–≤–µ—Ä–æ–≤ –Ω–∞ –ê–°
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data.xlsx
‚îÇ   ‚îú‚îÄ‚îÄ dbdata/                       # –î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ dbextract/                    # –≠–∫—Å–ø–æ—Ä—Ç—ã –∏–∑ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ graphics/                     # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏
‚îÇ
‚îú‚îÄ‚îÄ docs/                             # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ ARCHITECTURE.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ   ‚îú‚îÄ‚îÄ API_ENDPOINTS.md              # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ TESTING.md                    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ PROJECT_SUMMARY_RU.md         # –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
‚îÇ
‚îú‚îÄ‚îÄ README.md                         # –ì–ª–∞–≤–Ω—ã–π README
‚îú‚îÄ‚îÄ requirements.txt                  # –û–±—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ pytest.ini                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ pyproject.toml                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ LICENSE
```

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–∏—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
2. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ async SQLAlchemy
3. **Connection Pooling** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—É–ª–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
4. **Read Replicas** - —Ä–µ–ø–ª–∏–∫–∏ –ë–î –¥–ª—è —á—Ç–µ–Ω–∏—è
5. **API Gateway** - rate limiting, throttling

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **CORS** - –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å origins –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∑–∞–≤–µ—Ä—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é Keycloak
3. **Secrets Management** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å vault –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
4. **HTTPS** - –≤–∫–ª—é—á–∏—Ç—å SSL –≤ production
5. **Input Sanitization** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

1. **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫
2. **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
3. **ELK Stack** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **Distributed Tracing** - OpenTelemetry
5. **Health Checks** - —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã health –∏ readiness

### Scalability

1. **Horizontal Scaling** - –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ API –∏ UI
2. **Load Balancer** - –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
3. **Database Sharding** - —à–∞—Ä–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î –ø–æ VM
4. **Object Storage** - S3/MinIO –¥–ª—è –º–æ–¥–µ–ª–µ–π
5. **Message Queue** - RabbitMQ/Kafka –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AIOps Dashboard –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

‚úÖ **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º—É –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –≤–∞–ª–∏–¥–∞—Ü–∏—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤, –∏–Ω–¥–µ–∫—Å—ã –ë–î  
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ** - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π UI, REST API, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  
‚úÖ **ML/AI** - –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Prophet, –ø–æ–¥–±–æ—Ä –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤  

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ UI –∫ –ë–î –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –ú–æ–¥—É–ª—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–æ–¥–±–æ—Ä–æ–º –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ê–Ω–∞–ª–∏–∑ –ø–æ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –°–∏—Å—Ç–µ–º–∞–º (–ê–°)
- Docker-based —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Å—Ä–µ–¥

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 3.0  
**–î–∞—Ç–∞**: 2026-01-19  
**–ê–≤—Ç–æ—Ä**: AIOps Dashboard Team
